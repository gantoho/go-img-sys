# ğŸ”§ .air.toml é…ç½®æ–‡ä»¶è¯´æ˜

## ğŸ“ ä»€ä¹ˆæ˜¯ .air.tomlï¼Ÿ

`.air.toml` æ˜¯ **Air** å·¥å…·çš„é…ç½®æ–‡ä»¶ã€‚Air æ˜¯ä¸€ä¸ª Go å¼€å‘å·¥å…·ï¼Œç”¨äºå®ç°**ä»£ç çƒ­åŠ è½½**ã€‚

## ğŸ¯ ä½œç”¨

åœ¨å¼€å‘æ—¶ï¼Œå½“ä½ ä¿®æ”¹ Go ä»£ç å¹¶ä¿å­˜åï¼ŒAir ä¼šï¼š
1. âœ… è‡ªåŠ¨æ£€æµ‹ä»£ç å˜åŒ–
2. âœ… è‡ªåŠ¨é‡æ–°ç¼–è¯‘ç¨‹åº
3. âœ… è‡ªåŠ¨è¿è¡Œæ–°ç¼–è¯‘çš„ç¨‹åº
4. âœ… æ— éœ€æ‰‹åŠ¨é‡å¯

è¿™å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ï¼

## ğŸ“‹ é…ç½®è¯´æ˜

### [build] åŒºåŸŸ - ç¼–è¯‘é…ç½®

```toml
[build]
  bin = "build/image-sys"                          # è¾“å‡ºäºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„
  cmd = "go build -o build/image-sys ./cmd/image-sys"  # ç¼–è¯‘å‘½ä»¤
  delay = 1000                                     # æ£€æµ‹å˜åŒ–åå»¶è¿Ÿ(ms)
  exclude_dir = ["assets", "tmp", "vendor", "testdata", ".git"]  # å¿½ç•¥çš„ç›®å½•
  exclude_extension = ["so", "out", "dylib"]       # å¿½ç•¥çš„æ–‡ä»¶æ‰©å±•å
  exclude_regex = ["_test.go"]                     # å¿½ç•¥çš„æ–‡ä»¶æ­£åˆ™è¡¨è¾¾å¼
  include_ext = ["go"]                             # åªç›‘æ§è¿™äº›æ‰©å±•å
  log = "tmp/air.log"                              # æ—¥å¿—æ–‡ä»¶ä½ç½®
  stop_on_error = false                            # ç¼–è¯‘å¤±è´¥æ—¶æ˜¯å¦åœæ­¢
```

### [color] åŒºåŸŸ - é¢œè‰²é…ç½®

```toml
[color]
  build = "yellow"    # ç¼–è¯‘ä¿¡æ¯ç”¨é»„è‰²æ˜¾ç¤º
  main = "magenta"    # ä¸»ä¿¡æ¯ç”¨æ´‹çº¢è‰²æ˜¾ç¤º
  runner = "green"    # è¿è¡Œä¿¡æ¯ç”¨ç»¿è‰²æ˜¾ç¤º
  watcher = "cyan"    # ç›‘æ§ä¿¡æ¯ç”¨é’è‰²æ˜¾ç¤º
```

### [log] åŒºåŸŸ - æ—¥å¿—é…ç½®

```toml
[log]
  main_only = false   # æ˜¯å¦åªæ˜¾ç¤ºä¸»æ—¥å¿—
  time = false        # æ—¥å¿—ä¸­æ˜¯å¦æ˜¾ç¤ºæ—¶é—´
```

### [misc] åŒºåŸŸ - å…¶ä»–é…ç½®

```toml
[misc]
  clean_on_exit = true   # é€€å‡ºæ—¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. å®‰è£… Air

```bash
go install github.com/cosmtrek/air@latest
```

### 2. ä½¿ç”¨ Air è¿è¡Œé¡¹ç›®

```bash
# æ–¹å¼1: ç›´æ¥è¿è¡Œ air
air

# æ–¹å¼2: ä½¿ç”¨è„šæœ¬ (Windows)
.\scripts\build.bat dev

# æ–¹å¼3: ä½¿ç”¨è„šæœ¬ (Linux/Mac)
./scripts/build.sh dev

# æ–¹å¼4: ä½¿ç”¨ Makefile
cd scripts && make dev
```

### 3. ç¼–è¾‘ä»£ç 

ç¼–è¾‘ä»£ç å¹¶ä¿å­˜ï¼ŒAir ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æµ‹åˆ°å˜åŒ–
- âœ… é‡æ–°ç¼–è¯‘
- âœ… é‡æ–°è¿è¡Œç¨‹åº

## âš™ï¸ å½“å‰é…ç½®çš„å…³é”®å‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| `bin` | `build/image-sys` | ç¼–è¯‘è¾“å‡ºè·¯å¾„ |
| `cmd` | `go build -o build/image-sys ./cmd/image-sys` | ä½¿ç”¨æ ‡å‡†ç¼–è¯‘å‘½ä»¤ |
| `delay` | `1000` | 1ç§’å†…çš„å¤šæ¬¡æ”¹åŠ¨åªç¼–è¯‘ä¸€æ¬¡ |
| `exclude_dir` | `["assets", "tmp", "vendor", "testdata", ".git"]` | å¿½ç•¥è¿™äº›ç›®å½•çš„æ”¹åŠ¨ |
| `include_ext` | `["go"]` | åªç›‘æ§ .go æ–‡ä»¶ |
| `log` | `tmp/air.log` | æ—¥å¿—å†™å…¥ tmp ç›®å½• |

## ğŸ” VS Code ä¸­æ¶ˆé™¤çº¢æ³¢æµªçº¿

å¦‚æœ VS Code æ˜¾ç¤ºçº¢è‰²æ³¢æµªçº¿ï¼ˆçˆ†çº¢ï¼‰ï¼š

### æ–¹æ¡ˆAï¼šå®‰è£… TOML æ’ä»¶ï¼ˆæ¨èï¼‰

1. æ‰“å¼€ VS Code æ‰©å±•ï¼ˆCtrl+Shift+Xï¼‰
2. æœç´¢ `"TOML Language Support"` æˆ– `"Better TOML"`
3. ç‚¹å‡»å®‰è£…
4. é‡è½½ VS Code

### æ–¹æ¡ˆBï¼šç¦ç”¨çº¢çº¿ï¼ˆå¿«é€Ÿæ–¹æ¡ˆï¼‰

å¯ä»¥åœ¨ VS Code è®¾ç½®ä¸­ç¦ç”¨æ­¤æ–‡ä»¶çš„éªŒè¯ã€‚

## ğŸ“Œ æ˜¯å¦å¿…éœ€ï¼Ÿ

- âŒ **ä¸æ˜¯å¿…éœ€çš„** - è¿™ä¸ªæ–‡ä»¶åªåœ¨å¼€å‘æ—¶ä½¿ç”¨
- âœ… **å¯é€‰çš„** - å¦‚æœä¸éœ€è¦çƒ­åŠ è½½å¯ä»¥åˆ é™¤
- âœ¨ **æ¨èä½¿ç”¨** - å¤§å¤§æé«˜å¼€å‘æ•ˆç‡

## ğŸ—‘ï¸ å¦‚æœä¸éœ€è¦

å¦‚æœä½ ä¸ä½¿ç”¨ Air çƒ­åŠ è½½åŠŸèƒ½ï¼Œå¯ä»¥ï¼š

1. **åˆ é™¤è¿™ä¸ªæ–‡ä»¶** - `rm .air.toml`
2. **ç»§ç»­æ­£å¸¸ç¼–è¯‘è¿è¡Œ** - `go build -o build/image-sys ./cmd/image-sys`

## ğŸ“š æ›´å¤šä¿¡æ¯

- Air GitHub: https://github.com/cosmtrek/air
- Air æ–‡æ¡£: https://github.com/cosmtrek/air#configuration

## ğŸ’¡ å¼€å‘å»ºè®®

ä½¿ç”¨ Air è¿›è¡Œå¼€å‘æµç¨‹ï¼š

```bash
# 1. å¯åŠ¨ Air
air

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯ç¼–è¾‘ä»£ç 
# ç¼–è¾‘ internal/handler/image.go

# 3. ä¿å­˜æ–‡ä»¶ - Air ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘å’Œè¿è¡Œ
# æ— éœ€æ‰‹åŠ¨æ“ä½œï¼
```

è¿™æ ·å¯ä»¥ï¼š
- âš¡ å¿«é€ŸéªŒè¯ä»£ç æ”¹åŠ¨
- âš¡ å®æ—¶çœ‹åˆ°æ”¹åŠ¨æ•ˆæœ
- âš¡ æé«˜å¼€å‘é€Ÿåº¦

---

**æ€»ç»“ï¼š.air.toml æ˜¯å¯é€‰çš„çƒ­åŠ è½½é…ç½®ï¼Œç”¨äºæé«˜å¼€å‘æ•ˆç‡ã€‚** âœ¨
